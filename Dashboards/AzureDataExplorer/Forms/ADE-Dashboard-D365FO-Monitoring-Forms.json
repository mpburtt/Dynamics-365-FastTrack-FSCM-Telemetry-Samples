{"$schema":"https://dataexplorer.azure.com/static/d/schema/63/dashboard.json","id":"3b19866f-63ab-409c-b992-aab8721d295f","eTag":"247446b3-1316-4016-b154-d617412bdb54","title":"FSCM-Forms-Monitor-TST","tiles":[{"id":"5809a22f-397a-4bd8-9ca2-70c06894ba39","title":"Top 20 most opened forms","visualType":"bar","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":0,"y":0,"width":9,"height":9},"queryRef":{"kind":"query","queryId":"eb4f1da3-a887-4865-8550-cce580fdae51"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"dragX","disabled":false}],"legendLocation":"bottom","drillthrough":[],"selectedDataOnLoad":{"all":true,"limit":10},"dataPointsTooltip":{"all":false,"limit":1}}},{"id":"82e3f98d-f79f-4611-8b7e-c559d88927f0","title":"Form usage by longest average duration","description":"Shows executions time statistics grouped by form name. Execution times include the averages, min and max durations and accumulated total time.","visualType":"table","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":0,"y":9,"width":12,"height":8},"queryRef":{"kind":"query","queryId":"13a423aa-dc23-4e2b-9179-4b1affca493c"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Query Type","parameterId":"f9cae1c1-10c8-4ab1-ada6-e1a7b0cb675d","disabled":false}],"drillthrough":[],"table__renderLinks":[],"colorRules":[{"id":"5e243c32-c33a-40b6-8156-a0b757c9b332","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"rows","conditions":[{"operator":">","column":"Avg duration (s)","values":["5"]}],"chainingOperator":"and","colorStyle":"bold","color":"yellow","tag":"","icon":null,"ruleName":"","visualType":"table"},{"id":"47995495-a9cf-459e-82ef-97df2165f3f3","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"rows","conditions":[{"operator":">","column":"Avg duration (s)","values":["10"]}],"chainingOperator":"and","colorStyle":"bold","color":"red","tag":"","icon":null,"ruleName":"","visualType":"table"}]}},{"id":"2a656524-2915-42e7-a42f-7e5ba60da28e","title":"Form execution spread","visualType":"line","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":9,"y":0,"width":9,"height":9},"description":"Shows the form usage taking into account the time range, user, activity and form name.","queryRef":{"kind":"query","queryId":"39819461-d09f-4245-b35f-581c9e99e6ed"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":true,"xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"legendLocation":"bottom","drillthrough":[],"selectedDataOnLoad":{"all":true,"limit":10},"dataPointsTooltip":{"all":false,"limit":1}}},{"id":"f65d127d-8ee6-4a56-b286-0f773382ecf8","title":"Form execution by Legal Entity","visualType":"pie","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":18,"y":0,"width":6,"height":9},"queryRef":{"kind":"query","queryId":"1448bbf3-2c26-48d9-b4b9-2cbcf32f9145"},"visualOptions":{"hideLegend":true,"xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage","value"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"donut","pie__topNSlices":null,"legendLocation":"bottom","crossFilter":[],"drillthrough":[]}},{"id":"6f0db31d-4dbe-4e25-8ff3-cc48049dcd55","title":"Form instance execution times","description":"Shows the individual instances of this form and the respective opening times.","visualType":"table","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":0,"y":17,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"508d3f67-c095-4745-af53-cb95eda90ee6"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"7db39b31-fb44-4655-bebb-13711268eef7","title":"Form duration trend","description":"Shows executions time statistics grouped by form name. Execution times include the averages, min and max durations and accumulated total time.","visualType":"table","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":12,"y":9,"width":12,"height":8},"queryRef":{"kind":"query","queryId":"213ab5fb-2fa8-4604-875c-7dabb1a35fff"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":false,"crossFilterDisabled":false,"drillthroughDisabled":true,"crossFilter":[{"interaction":"column","property":"Query Type","parameterId":"f9cae1c1-10c8-4ab1-ada6-e1a7b0cb675d","disabled":false}],"drillthrough":[],"table__renderLinks":[],"colorRules":[{"id":"5e243c32-c33a-40b6-8156-a0b757c9b332","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"rows","conditions":[{"operator":">","column":"Avg duration (s)","values":["5"]}],"chainingOperator":"and","colorStyle":"bold","color":"yellow","tag":"","icon":null,"ruleName":"","visualType":"table"},{"id":"47995495-a9cf-459e-82ef-97df2165f3f3","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"rows","conditions":[{"operator":">","column":"Avg duration (s)","values":["10"]}],"chainingOperator":"and","colorStyle":"bold","color":"red","tag":"","icon":null,"ruleName":"","visualType":"table"},{"id":"43bcecb4-6ad8-4c04-a997-f02a19e8e60b","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">=","column":"14 Day trend","values":["0"]}],"chainingOperator":"and","colorStyle":"light","color":"green","tag":"%","icon":"arrowUp","ruleName":"","visualType":"table"},{"id":"f26d87b6-fdd8-4832-9f32-d612860689a9","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"values":["0"],"operator":"<","column":"14 Day trend"}],"chainingOperator":"and","colorStyle":"light","color":"red","tag":"%","icon":"arrowDown","ruleName":"","visualType":"table"},{"id":"aafe8163-7368-45ba-a436-8695df9ff75d","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":">=","column":"30 Day trend","values":["0"]}],"chainingOperator":"and","colorStyle":"light","color":"green","tag":"%","icon":"arrowUp","ruleName":"","visualType":"table"},{"id":"ba0248c4-c29e-43ef-aa5c-d8c6ffb52b30","ruleType":"colorByCondition","applyToColumn":null,"hideText":false,"applyTo":"cells","conditions":[{"operator":"<","column":"30 Day trend","values":["0"]}],"chainingOperator":"and","colorStyle":"light","color":"red","tag":"%","icon":"arrowDown","ruleName":"","visualType":"table"}]}},{"id":"4d1611f0-5a0d-4608-9adb-1d4e46c230b3","title":"Form instance execution times","description":"Shows the individual instances of this form and the respective opening times.","visualType":"column","pageId":"57b9f821-760e-45d0-82ee-71fb8dc71d79","layout":{"x":12,"y":17,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"fd59433d-0e56-4a32-aea4-ecf28b5ef851"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"legendLocation":"bottom","drillthrough":[],"selectedDataOnLoad":{"all":true,"limit":10},"dataPointsTooltip":{"all":false,"limit":1}}}],"dataSources":[{"id":"99f48c40-4d08-4070-af47-32e2e6e0fda7","kind":"manual-kusto","scopeId":"kusto","name":"FSCM-TST","clusterUri":"https://ade.applicationinsights.io/subscriptions/bc1d0969-7db8-4768-be23-b2ed191e0250/resourceGroups/rg-bprservices-we-fno-montel-uat","database":"appinsight-bprservices-we-fno-montel-uat","queryResultsCacheMaxAge":30000}],"schema_version":63,"baseQueries":[],"parameters":[{"kind":"duration","id":"42794f52-6782-487c-b413-b6b565549995","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":24,"unit":"hours"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"379e468b-9382-4f21-8f56-8dc14c874c04","displayName":"User Id","description":"User identification","variableName":"_userId","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"user_Id"},"queryRef":{"kind":"query","queryId":"15d98598-ae0d-4e30-89a6-19a79dd075c7"}},"showOnPages":{"kind":"selection","pageIds":["57b9f821-760e-45d0-82ee-71fb8dc71d79"]}},{"kind":"string","id":"cd512fb6-641a-4c45-8fa5-5cca92f53f95","displayName":"Activity Id","description":"Identification of the activity interacting with forms","variableName":"_activityId","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"ActivityId"},"queryRef":{"kind":"query","queryId":"f3de9563-139e-4acb-9fe8-7d28361b2f51"}},"showOnPages":{"kind":"selection","pageIds":["57b9f821-760e-45d0-82ee-71fb8dc71d79"]}},{"kind":"string","id":"ec9cee90-e7bf-4674-92db-e3f122b53c23","displayName":"Form name","description":"","variableName":"_formName","selectionType":"scalar","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"name"},"queryRef":{"kind":"query","queryId":"8eaa2a6c-626c-4cf4-9784-f5762a4d7c99"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"71a6eb6b-2b8f-471c-a0a6-98e1d28cc4f3","displayName":"Environment","description":"","variableName":"_environmentId","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"environmentId"},"queryRef":{"kind":"query","queryId":"f5055716-c8e0-4f6f-840a-bf850b35fc40"},"autoReset":true},"showOnPages":{"kind":"all"}}],"pages":[{"name":"Form Telemetry","id":"57b9f821-760e-45d0-82ee-71fb8dc71d79"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| where name !in (\"SysOperationSandboxForm\", \"SysBoxForm\", \"Dialog\")\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n| extend ['Activity Id'] = customDimensions.activityId \n| where isempty(['_userId']) or user_Id == ['_userId']\n| where isempty(['_activityId']) or ['Activity Id'] in (['_activityId'])\n| summarize [\"Form Opens\"] = count() by name \n| top 20 by [\"Form Opens\"] desc","id":"eb4f1da3-a887-4865-8550-cce580fdae51","usedVariables":["_activityId","_endTime","_environmentId","_startTime","_userId"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| where duration > 0\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n| extend ['Activity Id'] = customDimensions.activityId \n| where isempty(['_userId']) or user_Id == ['_userId']\n| where isempty(['_activityId']) or ['Activity Id'] in (['_activityId'])\n| where isempty(['_formName']) or name == ['_formName']\n| project ['Form name'] = name, duration\n| summarize     ['Number of executions']            = count()\n            ,   ['Avg duration (s)']                = round(avg(duration)/1000,2)\n            ,   ['Min duration (s)']                = round(min(duration)/1000,2)\n            ,   ['Max duration (s)']                = round(max(duration)/1000,2)\n            ,   ['Percentile 95 (s)']               = round(percentile(duration,95)/1000,2)\n            ,   ['Accumulated total duration (s)']  = round(sum(duration)/1000,2) by ['Form name'] \n| order by ['Avg duration (s)'] desc","id":"13a423aa-dc23-4e2b-9179-4b1affca493c","usedVariables":["_activityId","_endTime","_environmentId","_formName","_startTime","_userId"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| extend ['Activity Id'] = customDimensions.activityId\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n| where timestamp between (_startTime .. _endTime)\n| where isempty(['_userId']) or user_Id == ['_userId']\n| where isempty(['_activityId']) or ['Activity Id'] in (['_activityId'])\n| where isempty(['_formName']) or name == ['_formName']\n| summarize Count = count() by bin(timestamp,1h)","id":"39819461-d09f-4245-b35f-581c9e99e6ed","usedVariables":["_activityId","_endTime","_environmentId","_formName","_startTime","_userId"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n| extend ['Legal entity'] = toupper((customDimensions.LegalEntity))\n| where ['Legal entity'] != ''\n| summarize count() by ['Legal entity']\n","id":"1448bbf3-2c26-48d9-b4b9-2cbcf32f9145","usedVariables":["_endTime","_environmentId","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)| where duration > 0\n| extend ['Activity Id'] = customDimensions.activityId \n| where isempty(['_userId']) or user_Id == ['_userId']\n| where isempty(['_activityId']) or ['Activity Id'] in (['_activityId'])\n| where isempty(['_formName']) or name == ['_formName']\n| project ['Time stamp'] = timestamp, ['Form Name'] = name, ['Duration (s)'] = round(duration/1000,2),['Environment'] = EnvironmentId, ['Activity Id'] ","id":"508d3f67-c095-4745-af53-cb95eda90ee6","usedVariables":["_activityId","_endTime","_environmentId","_formName","_startTime","_userId"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"let _startTime30Days = ago(30d);\nlet _startTime14Days = ago(14d);\nlet _startTime7Days = ago(7d);\nlet _pageViews30Days = pageViews\n                        | where timestamp between (_startTime30Days .. now())\n                        | where duration > 0\n                        | where isempty(['_formName']) or name == ['_formName']\n                        | extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n                        | project ['Form name'] = name, duration,timestamp;\nlet _pageViews30DaysAgg =   _pageViews30Days\n                            | summarize ['30 days average (s)']           = round(avg(duration)/1000,2) by ['Form name']\n                            | order by ['30 days average (s)'] desc;\nlet _pageViews14DaysAgg =   _pageViews30Days\n                            | where timestamp between (_startTime14Days .. now())\n                            | summarize ['14 days average (s)']           = round(avg(duration)/1000,2) by ['Form name']\n                            | order by ['14 days average (s)'] desc;\nlet _pageViews7DaysAgg =    _pageViews30Days\n                            | where timestamp between (_startTime7Days .. now())\n                            | summarize     ['7 days executions']            = count()\n                                        ,   ['7 days average (s)']           = round(avg(duration)/1000,2) by ['Form name']\n                            | order by ['7 days average (s)'] desc;                        \n_pageViews7DaysAgg\n| lookup kind=leftouter _pageViews14DaysAgg on ['Form name']\n| lookup kind=leftouter _pageViews30DaysAgg on ['Form name']\n| extend ['14 Day trend'] = round(100 - ((['7 days average (s)'] / ['14 days average (s)'])*100),2)\n| extend ['30 Day trend'] = round(100 - ((['7 days average (s)'] / ['30 days average (s)'])*100),2)\n| project ['Form name'], ['7 days executions'], ['7 days average (s)'], ['14 Day trend'], ['30 Day trend']","id":"213ab5fb-2fa8-4604-875c-7dabb1a35fff","usedVariables":["_environmentId","_formName"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| where duration > 0\n| extend    EnvironmentId   = tostring(customDimensions.environmentId)\n| where     EnvironmentId in (_environmentId) or isempty(_environmentId)\n| extend ['Activity Id'] = customDimensions.activityId \n| where isempty(['_userId']) or user_Id == ['_userId']\n| where isempty(['_activityId']) or ['Activity Id'] in (['_activityId'])\n| where isempty(['_formName']) or name == ['_formName']\n| project ['Time stamp'] = timestamp, ['Environment'] = EnvironmentId, ['Form Name'] = name, ['Duration (s)'] = round(duration/1000,2)","id":"fd59433d-0e56-4a32-aea4-ecf28b5ef851","usedVariables":["_activityId","_endTime","_environmentId","_formName","_startTime","_userId"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| project user_Id\n| distinct user_Id","id":"15d98598-ae0d-4e30-89a6-19a79dd075c7","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| extend ActivityId = tostring(customDimensions.activityId)\n| distinct ActivityId","id":"f3de9563-139e-4acb-9fe8-7d28361b2f51","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| where timestamp between (_startTime .. _endTime)\n| distinct name\n","id":"8eaa2a6c-626c-4cf4-9784-f5762a4d7c99","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"99f48c40-4d08-4070-af47-32e2e6e0fda7"},"text":"pageViews\n| union exceptions\n| union customEvents\n| union customMetrics\n| union traces\n| where timestamp  between (_startTime .. _endTime)\n| extend Dims = parse_json(customDimensions)\n| extend environmentId = tostring(Dims.environmentId)\n| summarize by environmentId\n| where environmentId != \"\"","id":"f5055716-c8e0-4f6f-840a-bf850b35fc40","usedVariables":["_endTime","_startTime"]}]}